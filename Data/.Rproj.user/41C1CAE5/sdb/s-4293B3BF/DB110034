{
    "contents" : "library(reshape2)\nlibrary(ggplot2)\nlibrary(plyr)\nlibrary(drc)\n\n#Import Data_ Exp3####\nsubj <- dir(path = \"//monell/storage/mainland/Projects/TMA blocker/SupraStyle/Data/Raw Data/DR_Agitated\", pattern=\"\\\\.txt$\", full.names=TRUE) # creating a list of all file names\nnames(subj)  <- basename(subj)\ndf.jars.agit <- ldply(subj, read.delim, stringsAsFactors=FALSE) \ndf.jars.agit <- subset(df.jars.agit, select = c(\"Subject\",\"Session\", \"Trial\", \"valve\", \"valve2\", \"TrainList\", \"Running.Block.\", \"IntensityRating\")) \ndf.jars.agit$IntensityRating.inv <- 580-as.integer(df.jars.agit$IntensityRating)\n\n\n#Trial Data\ndf.trialJars <- subset(df.jars.agit, Running.Block. == \"Test\", select = c(\"Subject\", \"Session\", \"Trial\", \"valve\", \"valve2\", \"Running.Block.\", \"IntensityRating.inv\"))\n#write.csv(df.trial, \"TMA_supra_9.csv\") #give this to Dardalie to import\n\n\n#import the file that has the trial types\nvalve.list <- read.csv(\"//monell/storage/mainland/Projects/TMA blocker/SupraStyle/Data/Analysis/TMA_DR_merge.csv\")\n\n#merge with trial list\ndf.trial_merge <- merge(df.trialJars, valve.list)\n#Remove sub.1000\nExp3retest.df <- subset(df.trial_merge, Subject!=1000)\n\n\ncorrel.coeff <- function(Exp3retestT1, Exp3retestT2){\n  Exp3retestT1 <- Exp3retestT1[,-3] #get rid of column w/ trial and Session numbers\n  Exp3retestT2 <- Exp3retestT2[,-3]\n  names(Exp3retestT1) = c(\"valve\", \"Subject\", \"valve2\", \"Running.Block.\", \"trial1\", \"TMA.Concentration\")\n  names(Exp3retestT2) = c(\"valve\", \"Subject\", \"valve2\", \"Running.Block.\", \"trial2\", \"TMA.Concentration\")\n  Exp3Trials.comb <- merge(Exp3retestT1, Exp3retestT2, by.x = c(\"valve\", \"Subject\", \"valve2\", \"Running.Block.\", \"TMA.Concentration\"), by.y = c(\"valve\", \"Subject\", \"valve2\", \"Running.Block.\", \"TMA.Concentration\"))#merge the dataframes\n  testRetest.exp3 <- ddply(Exp3Trials.comb, .variables = c(\"Subject\"), function(x) trial.cor = cor(x$trial1, x$trial2))\n  testRetest.exp3$trial.corr <- abs(testRetest.exp3$V1)#takes abs. value of correlation values\n  return(testRetest.exp3)\n}\n\n#Exp3retest.df <- subset(Exp3retest.df, select = c(\"Subject\", \"Trial\", \"IntensityRating.inv\", \"TMA.Concentration\"))\nExp3retestT1 <- subset(Exp3retest.df, Trial <=26)\nExp3retestT2 <- subset(Exp3retest.df, Trial > 26)\n\n#run the test-retest function\ntestRetest.exp3 <- correl.coeff(Exp3retestT1, Exp3retestT2)\n\n#put subjects into order\ntestRetest.exp3$SubjectOrder <- factor(testRetest.exp3$Subject, levels = c(11, 50, 29, 33, 56, 49, 59, 58, 62, 54, 53), labels = c(1,2,3,4,5,6,7,8,9,10,11))\n\nggplot(testRetest.exp3, aes(x = SubjectOrder, y = trial.corr)) +\n  geom_point()  +\n  ylim(0,1)\n\n#for comparison with experiment 1\ntestRetest.Exp3 <- testRetest.exp3\ntestRetest.Exp3$Experiment <- 3\n\n\n",
    "created" : 1502221904170.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2140040979",
    "id" : "DB110034",
    "lastKnownWriteTime" : 1502228763,
    "path" : "/Volumes/mainland/Projects/TMA blocker/SupraStyle/Data/Analysis_DB/Exp3_Function for test-retest _ all trial combos.R",
    "project_path" : "Analysis_DB/Exp3_Function for test-retest _ all trial combos.R",
    "properties" : {
    },
    "relative_order" : 8,
    "source_on_save" : false,
    "type" : "r_source"
}